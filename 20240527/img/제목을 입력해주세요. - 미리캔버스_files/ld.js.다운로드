!function(){"use strict";function _(e,t){var n=null==(n=window.Criteo)?void 0:n.oneTagConfig;return null!=(n=n&&n[e])?n:t}var c,u="5.24.0",s=((T=c=c||{})[T.None=0]="None",T[T.Cookie=1]="Cookie",T[T.LocalStorage=2]="LocalStorage",T[T.Library=3]="Library",function(e,t){void 0===e&&(e=c.None),void 0===t&&(t=function(){}),this.origin=e,this.retrievalMethod=t}),l=(o.checkLocalStorageIsWritable=function(){try{var e;return window.localStorage?(e="criteo_localstorage_check",window.localStorage.setItem(e,e),window.localStorage.removeItem(e),!0):!1}catch(e){return!1}},o.checkCookiesAreWritable=function(){var e=new o("criteo_write_test",1e4),t=(e.setValueWithNoDomain("1"),"1"===e.cookieValue);return e.removeWithNoDomain(),t},o.prototype.setCookieRead=function(){this.isCookieRead=!0},o.prototype.setValue=function(e,t){void 0===t&&(t=!0),this.cookieValue=e,this.isCookieValueExternallySet=!0,t&&this.writeOnAllStorages(e)},o.prototype.setValueFromExistingCookie=function(){var e=this.getValue();void 0!==e&&(this.cookieValue=e,this.cookieExtractor=new s(c.Cookie))},o.prototype.setValueFromAllStorages=function(){var e=this.getFromAllStorages();this.cookieValue=e.value,this.cookieExtractor=e.identifierExtractor},o.prototype.getValue=function(){for(var e=0,t=document.cookie.split(";");e<t.length;e++){var n=t[e];if(n.substr(0,n.indexOf("=")).replace(/^\s+|\s+$/g,"")===this.cookieName)return n=n.substr(n.indexOf("=")+1),(decodeURIComponent||unescape)(n)}},o.prototype.removeWithNoDomain=function(){this.setValueWithNoDomainWithExpiration("",0)},o.prototype.removeOnMainDomain=function(){this.setOnMainDomainWithExpiration("",0)},o.prototype.setOnMainDomain=function(e){return this.setOnMainDomainWithExpiration(e,this.cookieRetentionTimeInMs)},o.prototype.writeOnAllStorages=function(e){this.setOnMainDomain(e),this.useLocalStorage&&window.localStorage.setItem(this.cookieName,e)},o.prototype.getFromAllStorages=function(){switch(this.cookieExtractor.origin){case c.LocalStorage:return{value:window.localStorage.getItem(this.cookieName),identifierExtractor:new s(c.LocalStorage)};case c.Cookie:return{value:this.getValue(),identifierExtractor:new s(c.Cookie)};case c.Library:return{value:this.cookieExtractor.retrievalMethod(),identifierExtractor:new s(c.Library)};case c.None:var e=null,t=(this.useLocalStorage&&(e=window.localStorage.getItem(this.cookieName)),this.getValue()||null);return{value:t||e,identifierExtractor:new s(this.computeStorageOrigin(t,e))}}},o.prototype.removeFromAllStorages=function(){this.removeOnMainDomain(),this.useLocalStorage&&window.localStorage.removeItem(this.cookieName)},o.prototype.setValueWithNoDomainWithExpiration=function(e,t){var n=new Date,t=(n.setTime(n.getTime()+t),"expires="+n.toUTCString()),n=encodeURIComponent||escape,n=(document.cookie=this.cookieName+"="+n(e)+";"+t+";path=/",this.getValue());void 0!==n&&(this.cookieValue=n)},o.prototype.setValueWithNoDomain=function(e){this.setValueWithNoDomainWithExpiration(e,this.cookieRetentionTimeInMs)},o.prototype.toFragmentData=function(){return{identifierExtractor:this.cookieExtractor,value:this.cookieValue}},o.prototype.setOnMainDomainWithExpiration=function(e,t){for(var n=new Date,o=(n.setTime(n.getTime()+t),"expires="+n.toUTCString()),i=null===document.location?[]:document.location.hostname.split("."),r=null,a=0;a<i.length;++a){var c="domain=."+(r=i.slice(i.length-a-1,i.length).join(".")),s=encodeURIComponent||escape,s=(document.cookie=this.cookieName+"="+s(e)+";"+o+";"+c+";path=/",this.getValue());if(s&&s===e)break}return r||document.location},o.prototype.computeStorageOrigin=function(e,t){var n=c.None;return e&&(n|=c.Cookie),t&&(n|=c.LocalStorage),n},o.prototype.getMatchingKeyInAllStorage=function(e){if(!(e instanceof RegExp))return e;if("undefined"!=typeof localStorage)for(var t=0,n=Object.keys(localStorage);t<n.length;t++){var o=n[t];if(e.test(o))return o}for(var i=0,r=document.cookie.split(";");i<r.length;i++){var a=r[i];if(e.test(a))return a}return""},o);function o(e,t,n){void 0===n&&(n=new s(c.None)),this.cookieValue=null,this.isCookieValueExternallySet=!1,this.isCookieRead=!1,this.cookieName=this.getMatchingKeyInAllStorage(e),this.cookieRetentionTimeInMs=t,this.cookieExtractor=n,this.useLocalStorage=o.checkLocalStorageIsWritable()}var d,t,i="OneTag",I=["color: #fff;","background: #ff4f00;","display: inline-block;","padding: 1px 4px;","border-radius: 3px;"].join(" "),U=((T=d=d||{})[T.Off=0]="Off",T[T.Error=1]="Error",T[T.Warning=2]="Warning",T[T.Info=3]="Info",T[T.Debug=4]="Debug",r.setLogLevel=function(e){r.level=e,this.debug("Log level set to "+d[e])},r.debug=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];r.log(console.log,d.Debug,e)},r.info=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];r.log(console.log,d.Info,e)},r.warn=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];r.log(console.warn,d.Warning,e)},r.error=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];r.log(console.error,d.Error,e)},r.log=function(e,t,n){t<=r.level&&(t=0<(t=window.navigator.userAgent).indexOf("MSIE ")||0<t.indexOf("Trident/")?["["+i+"]"]:["%c"+i,I],e.apply(console,t.concat(n)))},r.level=d.Warning,r);function r(){}(T=t=t||{})[T.Unknown=0]="Unknown",T[T.TopLevel=1]="TopLevel",T[T.Child=2]="Child";a.extractHostname=function(e){var t=document.createElement("a");return t.href=e,t.hostname},a.getAnchorWithReferrer=function(e){var t;return e&&e.referrer?((t=e.createElement("a")).href=e.referrer,t):null},a.getQueryString=function(t){var n;try{n=t.top.location.search}catch(e){var o=t;try{for(;o.parent.document!==o.document&&o.parent.document;)o=o.parent}catch(e){}o&&(t=a.getAnchorWithReferrer(o.document))&&(n=t.search)}return n},a.getHighestAccessibleUrl=function(e){try{var t=e.top.location.href;if(t)return t}catch(e){}return a.getHighestAccessibleWindow(e).topFrame.location.href},a.getPreviousUrl=function(e){var e=a.getHighestAccessibleWindow(e),t=e.topFrame,n="";return(n=e.err?n:t.document.referrer||(null==(e=t.top)?void 0:e.document.referrer)||"")||(t=null==(e=t.location)?void 0:e.ancestorOrigins)&&0<t.length&&(n=t[t.length-1]),n},a.onBodyReady=function(t,n){!function e(){document.body?t.setProtectedTimeout(n,0):t.setProtectedTimeout(e,10)}()},a.onDocumentReady=function(n,o){if("complete"===document.readyState)o();else if(document.addEventListener)n.addProtectedEventListener(document,"DOMContentLoaded",o,!1),n.addProtectedEventListener(window,"load",o,!1);else{n.attachProtectedEvent(document,"onreadystatechange",o),n.attachProtectedEvent(window,"onload",o);var t,i,r,e=!1;try{e=null===window.frameElement&&document.documentElement}catch(e){}e&&e.doScroll?function t(){if(e){try{e.doScroll("left")}catch(e){return void n.setProtectedTimeout(t,50)}o()}}():(t=!1,i=null===document.onload?null:function(e,t){return e.onload(t)},r=null===document.onreadystatechange?null:function(e,t){return e.onreadystatechange(t)},document.onload=document.onreadystatechange=function(e){r instanceof Function&&r(document,e),t||document.readyState&&"complete"!==document.readyState||(i instanceof Function&&i(document,e),t=!0,o())})}},a.removeLater=function(e,t){e.setProtectedTimeout(function(){null!==t&&null!==t.parentElement&&t.parentElement.removeChild(t)},3e4)},a.appendCriteoContainer=function(e){var t;return e?((t=document.createElement("div")).setAttribute("id","criteo-tags-div"),t.style.display="none",e.appendChild(t),t):null},a.getOneTagLocation=function(){try{return window.self===window.top?t.TopLevel:t.Child}catch(e){return U.info("Cannot get OneTag location",e),t.Unknown}},a.getHighestAccessibleWindow=function(e){var t=e,n=!1;try{for(;t.parent.document!==t.document;){if(!t.parent.document){n=!0;break}t=t.parent}}catch(e){n=!0}return{topFrame:t,err:n}};var W=a;function a(){}function G(){var e=_("blockedSteps",[]),t={account:_("partnerId")||null,firstPartyIdentifier:_("fpIdentifier")||null,customerInfo:[],extraData:[],handlerParams:{v:u,otl:W.getOneTagLocation()},handlerResponseType:"single",handlerUrlPrefix:"https://sslwidget.criteo.com/event",partnerPayload:null,requestType:"pixel",responseType:"js",tagVersion:u,dynamic:_("dynamic")||null,fullUrlMaxLength:_("fullUrlMaxLength",4e3),previousUrlMaxLength:_("previousUrlMaxLength",400),privateModeDetectionEnabled:_("privateModeDetectionEnabled",!0),isStepAllowed:function(t){return!e.some(function(e){return e==t})}},n={item:!0,"item.id":!0,product:!0,"product.id":!0},o={item:!0,product:!0},i={shouldEncodeField:function(e){return n[e]}},r={shouldParseField:function(e){return o[e]}},a=function(){if(window.hasOwnProperty("ID5"))return ID5.init({partnerId:203})}();return{hooks:{},shortNameMap:{events:{applaunched:"al",viewitem:"vp",viewhome:"vh",viewlist:"vl",viewbasket:"vb",viewsearch:"vs",viewpage:"vpg",tracktransaction:"vc",addtocart:"ac",calldising:"dis",setdata:"exd",setemail:"ce",setidentity:"id"},properties:{event:"e",account:"a",first_party_identifier:"fpid",currency:"c",product:"p",item:"p","item.id":"i","item.price":"pr","item.quantity":"q","item.availability":"pav","item.buy_box":"bb","item.sku_parent":"psp","item.store_id":"ps",item_whitelist:"iw","product.id":"i","product.price":"pr","product.quantity":"q","product.availability":"pav","product.buy_box":"bb","product.sku_parent":"psp","product.store_id":"ps",data:"d",keywords:"kw",checkin_date:"din",checkout_date:"dout",deduplication:"dd",delivery:"dl",attribution:"at","attribution.channel":"ac","attribution.value":"v",user_segment:"si",new_customer:"nc",customer_id:"ci",email:"m",hash_method:"h",identity:"id",raw_identity:"rid",transaction_value:"tv",client_revenue:"cr",responseType:"rt",page_name:"pn",page_id:"pi",page_number:"pnb",category:"ca",filters:"f","filters.name":"fn","filters.operator":"fo","filters.value":"fv",retailer_visitor_id:"rvi",price:"pr",availability:"av",sub_event_type:"se",store_id:"s",item_group_id:"sp",sku_parent:"sp",zipcode:"z",nocall:"noc",block:"bl"}},trackingCallData:t,workflow:{container:null,disOnce:!1,manualDising:!1,manualFlush:!1,noPartialFlush:!1,partialDis:!1},encodingConfig:i,parsingConfig:r,identifierScrappingConfig:{externalIdentifiersToRead:{FirstId:{key:"firstid",storageSource:new s(c.Cookie)},IntimateMergerId:{key:/^_im_uid\./,storageSource:new s(c.LocalStorage)},Id5:{key:"id5",storageSource:new s(c.Library,function(){if(void 0!==a)return a.getUserId()})}}}}}e.prototype.getReadyToRetrieveProvider=function(){return this.tcfv2ConsentProvider.hasCallerFunctionInFrame()?this.tcfv2ConsentProvider:this.tcfv1ConsentProvider.hasCallerFunctionInFrame()?this.tcfv1ConsentProvider:void 0!==this.tcfv2ConsentProvider.getCMPFrame()?this.tcfv2ConsentProvider:void 0!==this.tcfv1ConsentProvider.getCMPFrame()?this.tcfv1ConsentProvider:void 0},e.prototype.retrieveConsentForPassback=function(e){var t=this.getReadyToRetrieveProvider();void 0===t&&(this.logger("No compatible GDPR privacy provider found"),e(void 0)),t===this.tcfv1ConsentProvider?this.tcfv1ConsentProvider.retrieveConsentForPassback(e):t===this.tcfv2ConsentProvider&&this.tcfv2ConsentProvider.retrieveConsent(e)},e.prototype.retrieveConsent=function(e){var t=this.getReadyToRetrieveProvider();void 0===t&&(this.logger("No compatible GDPR privacy provider found"),e(void 0)),null!=t&&t.retrieveConsent(e)},e.prototype.readyToRetrieve=function(){return this.tcfv2ConsentProvider.readyToRetrieve()||this.tcfv1ConsentProvider.readyToRetrieve()};var E=e;function e(e,t,n){void 0===n&&(n=function(e){}),this.tcfv1ConsentProvider=e,this.tcfv2ConsentProvider=t,this.logger=n}function p(e){try{return JSON.parse(e)}catch(e){}}n.prototype.getCMPFrame=function(){for(var e,t=this.currentWindow,n=0;n<10;++n){try{t.frames.__cmpLocator&&(e=t)}catch(e){}if(t===this.currentWindow.top)break;t=t.parent}return e},n.prototype.hasCallerFunctionInFrame=function(){return"function"==typeof this.currentWindow.__cmp},n.prototype.readyToRetrieve=function(){return this.hasCallerFunctionInFrame()||void 0!==this.getCMPFrame()},n.prototype.pingWithTimeout=function(o,e,t,n){function i(e,t){r.logger(t),clearTimeout(e),n()}var r=this;return window.setTimeout(function(){var n=window.setTimeout(function(){i(o,"Timeout: Unable to get ping return after "+e+"ms")},e);r.executeCommand("ping",null,function(e,t){clearTimeout(n),t?(r.logger("GDPR CMP ping returned"),!0!==e.cmpLoaded&&i(o,"GDPR ping returned cmpLoaded which is not true"),r.logger("GDPR ping returned cmpLoaded which is true")):i(o,"Error sending ping to GDPR CMP")})},t)},n.prototype.retrieveConsent=function(e){this.executeRetrieveConsent("getConsentData",null,e)},n.prototype.retrieveConsentForPassback=function(e){this.executeRetrieveConsent("getVendorConsents",[91],e)},n.prototype.executeRetrieveConsent=function(e,t,n){var o=this,i=!1,r=window.setTimeout(function(){i=!0,o.logger("Timeout: Unable to resolve GDPR consent after "+o.timeout+"ms"),n(void 0)},this.timeout),a=!1!==this.cmpAutoDetect?this.pingWithTimeout(r,this.pingTimeout,this.pingDelay,function(){i=!0,o.logger("Timeout: Unable to ping GDPR API after "+o.pingTimeout+"ms"),n(void 0)}):void 0;this.executeCommand(e,t,function(e,t){clearTimeout(a),i||(clearTimeout(r),t?(o.logger("GDPR consent retrieved"),o.processConsentData(e,n)):(o.logger("Error retrieving GDPR consent data from CMP"),n(void 0)))})},n.prototype.processConsentData=function(e,t){var n;e?(n={},void 0!==e.consentData&&(n.consentData=e.consentData),void 0!==e.gdprApplies&&(n.gdprApplies=!!e.gdprApplies),t(n)):(this.logger("Unable to read GDPR consent data from CMP"),t(void 0))},n.prototype.executeCommand=function(e,t,n){var o,i=this;this.hasCallerFunctionInFrame()||(this.logger("No GDPR CMP defined on current frame"),o=this.getCMPFrame(),this.currentWindow.__cmp=function(e,t,n){o?(t={__cmpCall:{command:e,parameter:t,callId:e=Math.random().toString(10)}},i.cmpCallbacks[e]=n,o.postMessage(t,"*")):(i.logger("GDPR CMP not found in any frame"),n({msg:"GDPR CMP not found in any frame"},!1))},this.currentWindow.addEventListener("message",function(e){var e="string"==typeof e.data?p(e.data):e.data;e&&e.__cmpReturn&&e.__cmpReturn.callId&&e.__cmpReturn.returnValue&&(e=e.__cmpReturn,i.cmpCallbacks)&&i.cmpCallbacks[e.callId]&&(i.cmpCallbacks[e.callId](e.returnValue,e.success),delete i.cmpCallbacks[e.callId])},!1)),this.currentWindow.__cmp(e,t,n)};var F=n;function n(e,t,n){void 0===n&&(n=function(e){}),this.cmpCallbacks={},this.currentWindow=e,this.timeout=t.tcfTimeout,this.pingTimeout=t.tcfPingTimeout,this.pingDelay=t.tcfPingDelay,this.cmpAutoDetect=t.cmpAutoDetect,this.logger=n}(T=h=h||{}).LOADED="tcloaded",T.UI_SHOWN="cmpuishown",T.USER_ACTION_COMPLETE="useractioncomplete",f.prototype.getCMPFrame=function(){for(var e,t=this.currentWindow,n=0;n<10;++n){try{t.frames.__tcfapiLocator&&(e=t)}catch(e){}if(t===this.currentWindow.top)break;t=t.parent}return e},f.prototype.hasCallerFunctionInFrame=function(){return"function"==typeof this.currentWindow.__tcfapi},f.prototype.readyToRetrieve=function(){return this.hasCallerFunctionInFrame()||void 0!==this.getCMPFrame()},f.prototype.pingWithTimeout=function(n,e,t,o){function i(e,t){r.logger(t),clearTimeout(e),o()}var r=this;return window.setTimeout(function(){var t=window.setTimeout(function(){i(n,"Timeout: Unable to get TCFv2 ping return after "+e+"ms")},e);r.executeCommand("ping",2,function(e){clearTimeout(t),r.logger("TCFv2 CMP ping returned in ms"),"error"===e.cmpStatus?i(n,"Error status on ping to TCFv2 CMP"):!0!==e.cmpLoaded?i(n,"TCFv2 ping returned cmpLoaded = false"):r.logger("TCFv2 ping returned cmpLoaded = true")})},t)},f.prototype.retrieveConsent=function(n){var o,i,r=this,a=!1,c=window.setTimeout(function(){a=!0,i===h.UI_SHOWN?(r.logger("Timeout: User hasn't confirm their consent settings after "+r.timeout+"ms"),n(o)):(r.logger("Timeout: Unable to resolve TCFv2 consent after "+r.timeout+"ms"),n(void 0))},this.timeout),s=!1!==this.cmpAutoDetect?this.pingWithTimeout(c,this.pingTimeout,this.pingDelay,function(){a=!0,r.logger("Timeout: Unable to ping TCFv2 API after "+r.pingTimeout+"ms"),n(void 0)}):void 0;this.executeCommand("addEventListener",2,function(e,t){clearTimeout(s),a||((i=e.eventStatus)!==h.UI_SHOWN&&clearTimeout(c),t?(r.logger("TCFv2 consent retrieved in ms"),e||(r.logger("Unable to read GDPR consent data from CMP"),n(void 0)),o=r.processResponseData(e),i!==h.LOADED&&i!==h.USER_ACTION_COMPLETE||n(o)):(r.logger("Error retrieving TCFv2 consent data from CMP"),n(void 0)))})},f.prototype.processResponseData=function(e){var t,n={};return void 0!==e.tcString&&(n.consentData=e.tcString),void 0!==e.gdprApplies&&(n.gdprApplies=!!e.gdprApplies),n.version=e.tcfPolicyVersion||2,n.purposes=null==(t=null==e?void 0:e.purpose)?void 0:t.consents,n.vendorConsents=null==(t=null==e?void 0:e.vendor)?void 0:t.consents,n},f.prototype.executeCommand=function(e,t,n,o){var i,r=this;this.hasCallerFunctionInFrame()||(this.logger("No TCFv2 CMP defined on current frame"),i=this.getCMPFrame(),this.currentWindow.__tcfapi=function(e,t,n,o){i?(t={__tcfapiCall:{command:e,version:t,parameter:o,callId:e=Math.random().toString(10)}},r.cmpCallbacks[e]=n,i.postMessage(t,"*")):(r.logger("TCFv2 CMP not found in any frame"),n({msg:"TCFv2 CMP not found in any frame"},!1))},this.currentWindow.addEventListener("message",function(e){var e="string"==typeof e.data?p(e.data):e.data;e&&e.__tcfapiReturn&&e.__tcfapiReturn.callId&&e.__tcfapiReturn.returnValue&&(e=e.__tcfapiReturn,r.cmpCallbacks)&&r.cmpCallbacks[e.callId]&&"function"==typeof r.cmpCallbacks[e.callId]&&(r.cmpCallbacks[e.callId](e.returnValue,e.success),e.returnValue.eventStatus!==h.UI_SHOWN)&&delete r.cmpCallbacks[e.callId]},!1)),this.currentWindow.__tcfapi(e,t,n,o)};var h,M=f;function f(e,t,n){void 0===n&&(n=function(e){}),this.cmpCallbacks={},this.currentWindow=e,this.timeout=t.tcfTimeout,this.pingTimeout=t.tcfPingTimeout,this.pingDelay=t.tcfPingDelay,this.cmpAutoDetect=t.cmpAutoDetect,this.logger=n}g.prototype.getCMPFrame=function(){for(var e,t=this.currentWindow,n=0;n<10;++n){try{t.frames.__uspapiLocator&&(e=t)}catch(e){}if(t===this.currentWindow.top)break;t=t.parent}return e},g.prototype.hasCallerFunctionInWindow=function(){return"function"==typeof this.currentWindow.__uspapi},g.prototype.readyToRetrieve=function(){return this.hasCallerFunctionInWindow()||void 0!==this.getCMPFrame()},g.prototype.retrieveConsent=function(n){var o=this,i=!1,r=window.setTimeout(function(){i=!0,o.logger("Timeout: Unable to resolve CCPA consent after "+o.timeout+"ms"),n(void 0)},this.timeout);this.executeCommand("getUSPData",1,function(e,t){i||(clearTimeout(r),t?(o.logger("CCPA consent retrieved"),o.processResponseData(e,n)):(o.logger("Error retrieving CCPA consent data from CMP"),n(void 0)))})},g.prototype.processResponseData=function(e,t){e?t(e):(this.logger("Unable to read CCPA consent data from CMP"),t(void 0))},g.prototype.executeCommand=function(e,t,n){var o,i=this;this.hasCallerFunctionInWindow()||(this.logger("No CCPA CMP defined on current frame"),o=this.getCMPFrame(),this.currentWindow.__uspapi=function(e,t,n){o?(t={__uspapiCall:{command:e,parameter:t,callId:e=Math.random().toString(10)}},i.uspapiCallbacks[e]=n,o.postMessage(t,"*")):(i.logger("CCPA CMP not found in any frame"),n({msg:"CCPA CMP not found in any frame"},!1))},this.currentWindow.addEventListener("message",function(e){var e="string"==typeof e.data?p(e.data):e.data;e&&e.__uspapiReturn&&e.__uspapiReturn.callId&&e.__uspapiReturn.returnValue&&(e=e.__uspapiReturn,i.uspapiCallbacks)&&i.uspapiCallbacks[e.callId]&&(i.uspapiCallbacks[e.callId](e.returnValue,e.success),delete i.uspapiCallbacks[e.callId])},!1)),this.currentWindow.__uspapi(e,t,n)},g.prototype.hasUserOptOut=function(e){return!(!e||!e.uspString||"1YNY"===e.uspString.toUpperCase()||"1YNN"===e.uspString.toUpperCase()||"1YN-"===e.uspString.toUpperCase()||"1-N-"===e.uspString.toUpperCase()||"1-NN"===e.uspString.toUpperCase()||"1-NY"===e.uspString.toUpperCase()||"1---"===e.uspString)};var x=g;function g(e,t,n){void 0===n&&(n=function(e){}),this.uspapiCallbacks={},this.currentWindow=e,this.timeout=t.uspApiTimeout,this.logger=n}m.prototype.retrieveConsent=function(t){var n,e=this.tcfCompatibleConsentProvider.readyToRetrieve(),o=this.ccpaConsentProvider.readyToRetrieve(),i={};e||o?(n=e&&o?2:1,e&&this.tcfCompatibleConsentProvider.retrieveConsent(function(e){i.gdprConsent=e,0==--n&&t(i)}),o&&this.ccpaConsentProvider.retrieveConsent(function(e){i.ccpaConsent=e,0==--n&&t(i)})):t(i)};var H=m;function m(e,t,n,o){n={tcfTimeout:t=void 0===t?1e4:t,tcfPingTimeout:n=void 0===n?50:n,tcfPingDelay:o=void 0===o?1e3:o},o={uspApiTimeout:t};this.tcfCompatibleConsentProvider=new E(new F(e,n,U.info),new M(e,n,U.info),U.info),this.ccpaConsentProvider=new x(e,o,U.info)}v.prototype.catchAndStoreException=function(e,t){try{return void 0===t?e():e.apply(this,t)}catch(e){e instanceof Error?this.exceptions.push(e):this.exceptions.push(new Error(e))}},v.prototype.setProtectedTimeout=function(e,t){var n=this;if("undefined"!=typeof window&&"function"==typeof window.setTimeout)return window.setTimeout(function(){return n.catchAndStoreException(e)},t)},v.prototype.addProtectedEventListener=function(e,t,n,o){var i=this;if(void 0!==e&&"function"==typeof e.addEventListener)return e.addEventListener(t,function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return i.catchAndStoreException(n,e)},o)},v.prototype.attachProtectedEvent=function(e,t,n){var o=this;if(void 0!==e&&"function"==typeof e.attachEvent)return e.attachEvent(t,function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return o.catchAndStoreException(n,e)})};var z=v;function v(){this.exceptions=[]}function D(e,t){if(e instanceof Array)for(var n=0,o=e;n<o.length;n++)D(o[n],t);else V(t,e)||t.push(e)}function V(e,t){for(var n=JSON.stringify||encodeURIComponent||escape,o=n(t),i=0,r=e;i<r.length;i++){var a=r[i];if(a===t||n(a)===o)return 1}}function A(e){for(var t=[],n=0,o=e;n<o.length;n++){var i=o[n];null!=i&&t.push(i)}return t}function j(e,t){if(void 0!==e||void 0!==t){if(void 0===e||void 0===t)return!1;if(!(e instanceof Array))return j([e],t);if(!(t instanceof Array))return j(e,[t]);if(e.length!==t.length)return!1;for(var n=0,o=e;n<o.length;n++)if(!V(t,o[n]))return!1}return!0}function B(e){var t=e;if(e instanceof Function)return(t=e())instanceof Function?t:B(t);if(e instanceof Array)for(var t=[],n=0;n<e.length;++n)t[n]=B(e[n]);else if(e&&"[object Object]"===e.toString()){t={};for(var o=0,i=Object.getOwnPropertyNames(e);o<i.length;o++){var r=i[o];t[r]=B(e[r])}}return t}function q(e,t){for(var n=0,o=e;n<o.length;n++){var i=o[n];if(i.event===t.event&&j(t.account,i.account)){for(var r in t)t.hasOwnProperty(r)&&"account"!==r&&(i[r]=t[r]);return}}e.push(t)}function J(e,t){for(var n=0,o=e;n<o.length;n++){var i=o[n];if(i.event===t.event&&j(t.account,i.account)&&i.hash_method===t.hash_method)return void(void 0!==t.email&&(i.email=function(e,t){var n=[];if(void 0===e)return void 0===t?n:t.slice();if(void 0===t)return e.slice();for(var o=0,i=t;o<i.length;o++){var r=i[o];V(e,r)||n.push(r)}return e.concat(n)}(i.email instanceof Array||void 0===i.email?i.email:[i.email],t.email instanceof Array?t.email:[t.email])))}e.push(t)}function R(e,t,n){n=B(n);return Y(e,n),q(t,B(n)),1}function Y(e,t){for(var n=0,o=e;n<o.length;n++){var i=o[n];if(i.event===t.event&&void 0===t.account&&void 0===i.account||j(t.account,i.account)){for(var r in t)t.hasOwnProperty(r)&&"account"!==r&&(i[r]=t[r]);return}}e.push(t)}y.prototype.fillQueryStringParams=function(e,t){var n=this.config.trackingCallData.firstPartyIdentifier;n&&e.push("fpid="+n),this.gaid&&e.push("ai="+this.gaid),this.idfa&&e.push("idfa="+this.idfa),this.canWriteCookie&&e.push("adce=1"),null!==this.clickOriginPayload&&e.push("cop="+this.clickOriginPayload),null!==this.optoutCookie.cookieValue&&e.push("optout=1"),null!=this.bundleCookie.cookieValue&&e.push("bundle="+this.bundleCookie.cookieValue),null!==this.secureIdCookie.cookieValue&&(e.push("sid="+this.secureIdCookie.cookieValue),e.push("sid_read="+(this.secureIdCookie.isCookieValueExternallySet?"1":"0"))),null!==this.tld&&e.push("tld="+this.tld),t.privateModeDetectionEnabled&&null!==this.privateMode&&0!==this.privateMode?e.push("pm="+this.privateMode):t.privateModeDetectionEnabled||e.push("pm=3"),void 0!==new l("cto_clc",this.readonlyCookieRetentionTime).getValue()&&e.push("clc=1")},y.prototype.checkAcid=function(){this.setCanWriteCookie(),this.setCanWriteLocalStorage()},y.prototype.setCop=function(e){var t=W.getQueryString(e);if(void 0!==t&&(this.clickOriginPayload=this.getParameterValueByName(t,"cto_pld")),null===this.clickOriginPayload)try{var n=W.getAnchorWithReferrer(e.top.document);n&&n.search&&(this.clickOriginPayload=this.getParameterValueByName(n.search,"cto_pld"))}catch(e){}},y.prototype.checkClientSideIdentityStatus=function(){this.optoutCookie.getFromAllStorages(),this.secureIdCookie.setValueFromAllStorages(),this.bundleCookie.setValueFromAllStorages(),this.ifaCookie.setValueFromAllStorages()},y.prototype.checkCookies=function(e){var t=!0;if(e.callbacks){for(var n=0,o="string"==typeof e.callbacks?[e.callbacks]:e.callbacks;n<o.length;n++){var i=o[n],r=document.createElement("img"),i=(r.setAttribute("style","display:none;"),r.setAttribute("width","1"),r.setAttribute("height","1"),r.setAttribute("data-owner","criteo-tag"),r.setAttribute("src",i),document.getElementsByTagName("script")[0]);i.parentNode.insertBefore(r,i),W.removeLater(this.exceptionHandler,r)}t=!1}e.optout?(this.optoutCookie.setValue("1",t),this.secureIdCookie.removeFromAllStorages(),this.bundleCookie.removeFromAllStorages()):(e.bundle&&this.bundleCookie.setValue(e.bundle,t),e.removeSid?this.secureIdCookie.removeFromAllStorages():e.sid&&this.secureIdCookie.setValue(e.sid,t))},y.prototype.scrapIdentifiers=function(n){return Object.keys(n.externalIdentifiersToRead).map(function(e){var t=n.externalIdentifiersToRead[e],t=new l(t.key,0,t.storageSource).getFromAllStorages().value;return null!=t&&0<t.length?JSON.stringify({type:e,value:t}):""}).filter(function(e){return 0<e.length}).join(",")},y.prototype.getParameterValueByName=function(e,t){if(e&&1<e.length){var n,t="&"+t+"=",o=(e="?"===e[0]?"&"+e.substr(1):e).indexOf(t);if(-1!==o)return n=e.indexOf("&",o+t.length),e.slice(o+t.length,n<0?void 0:n)}return null},y.prototype.setCanWriteCookie=function(){this.canWriteCookie=l.checkCookiesAreWritable()},y.prototype.setCanWriteLocalStorage=function(){this.canWriteLocalStorage=l.checkLocalStorageIsWritable()},y.prototype.getTld=function(){var e=new l("cto_tld_test",36e5),t=e.setOnMainDomain("woot");return e.removeOnMainDomain(),t},y.prototype.getPrivateMode=function(e,t){if(e.isSafari)try{if("function"==typeof t.openDatabase)return t.openDatabase(null,null,null,null),1}catch(e){return 2}return 0};var Q=y;function y(e,t,n,o){this.readonlyCookieRetentionTime=0,this.optoutCookieRetentionTime=15768e7,this.identificationCookieRetentionTime=34164e6,this.optoutCookie=new l("cto_optout",this.optoutCookieRetentionTime),this.secureIdCookie=new l("cto_sid",this.identificationCookieRetentionTime),this.bundleCookie=new l("cto_bundle",this.identificationCookieRetentionTime),this.ifaCookie=new l("id_controller_ifa",this.identificationCookieRetentionTime),this.canWriteCookie=!1,this.canWriteLocalStorage=!1,this.clickOriginPayload=null,this.tld=this.getTld(),this.privateMode=this.getPrivateMode(t,n),this.exceptionHandler=e,this.config=o}w.prototype.fillQueryStringParams=function(e,t){},w.prototype.checkAcid=function(){},w.prototype.setCop=function(e){},w.prototype.checkClientSideIdentityStatus=function(){},w.prototype.checkCookies=function(e){},w.prototype.scrapIdentifiers=function(e){return""};var K=w;function w(){this.secureIdCookie=new l("empty",0),this.optoutCookie=new l("empty",0),this.bundleCookie=new l("empty",0),this.ifaCookie=new l("empty",0),this.clickOriginPayload=null,this.tld=null,this.canWriteCookie=!1,this.canWriteLocalStorage=!1,this.privateMode=0}C.prototype.createIframe=function(e,t,n,o,i){var r=document.createElement("iframe"),a=encodeURIComponent||escape,c=W.getHighestAccessibleUrl(window),a=a(W.extractHostname(c)),c=window.SYNCFRAME_ORIGIN||"onetag",t={bundle:e.bundleCookie.toFragmentData(),cw:e.canWriteCookie,optout:e.optoutCookie.toFragmentData(),origin:c,sid:e.secureIdCookie.toFragmentData(),tld:e.tld,topUrl:a,version:t.replace(/\./g,"_"),ifa:e.ifaCookie.toFragmentData(),lsw:e.canWriteLocalStorage,pm:o?e.privateMode:3},o=this.gumSyncFrameEndPoint,e=("#gum-debug-mode"===window.location.hash?o+="?debug=1&topUrl="+a:o+="?topUrl="+a,c&&(o+="&origin="+c),i.gdprConsent),a=(e&&(void 0!==e.gdprApplies&&(o+="&gdpr="+(e.gdprApplies?1:0)),void 0!==e.consentData)&&(o+="&gdpr_consent="+e.consentData),i.ccpaConsent);return a&&void 0!==a.uspString&&(o+="&us_privacy="+a.uspString),o+="#"+JSON.stringify(t),r.src=o,r.id=this.gumSyncFrameId,r.width="0",r.height="0",r.frameBorder="0",r.setAttribute("style","border-width:0px; margin:0px; display:none"),r.setAttribute("sandbox","allow-scripts allow-same-origin"),r.title="Criteo GUM iframe",W.removeLater(n,r),r},C.prototype.setWaitingFlag=function(e){this.waitingForSyncframe=this.waitingForSyncframe&&null===e.bundleCookie.cookieValue&&null===e.optoutCookie.cookieValue},C.prototype.shouldInjectSyncframe=function(){return void 0!==window.addEventListener||this.forceSyncFrame};var $=C;function C(e){this.forceSyncFrame=!1,this.gumSyncFrameOrigin="https://"+_("gumDomain","gum.criteo.com"),this.gumSyncFrameEndPoint=window.CriteoSyncFrameUrlOverride||this.gumSyncFrameOrigin+"/syncframe",this.gumSyncFrameId="criteo-syncframe-onetag",this.waitingForSyncframe=e.hasItp||_("waitForGum",!0)}b.prototype.createIframe=function(e,t,n,o,i){return document.createElement("iframe")},b.prototype.setWaitingFlag=function(e){},b.prototype.shouldInjectSyncframe=function(){return!1};var X=b;function b(){this.gumSyncFrameOrigin="",this.gumSyncFrameEndPoint="",this.gumSyncFrameId="",this.forceSyncFrame=!1,this.waitingForSyncframe=!1}var Z=new RegExp(/^Mozilla\/5\.0 \([^)]+\) AppleWebKit\/[^ ]+ \(KHTML, like Gecko\) Version\/([^ ]+)( Mobile\/[^ ]+)? Safari\/[^ ]+$/i),ee=(k.prototype.canRetrieveMetrics=function(){return this.hasPerformanceApi},k.prototype.startRecordingInit=function(){this.canRetrieveMetrics()&&(this.beginInit=performance.now())},k.prototype.stopRecordingInit=function(){var e;this.canRetrieveMetrics()&&null===this.timings.initTime&&null!==this.beginInit&&(e=performance.now(),this.timings.initTime=e-this.beginInit)},k.prototype.startRecordingPush=function(){this.canRetrieveMetrics()&&(this.beginPush=performance.now())},k.prototype.stopRecordingPush=function(){var e;this.canRetrieveMetrics()&&null===this.timings.pushTime&&null!==this.beginPush&&null!==this.timings.initTime&&(e=performance.now(),this.timings.pushTime=e-this.beginPush)},k.prototype.getPerformanceOrDegradedNow=function(){return this.canRetrieveMetrics()?performance.now():(new Date).getTime()},k);function k(){this.timings={initTime:null,pushTime:null},this.beginInit=null,this.beginPush=null,this.hasPerformanceApi=void 0!==window.performance&&"function"==typeof window.performance.now}P.prototype.trySetPageId=function(e,t){this.isCbsEnabled&&this.checkNotExistOrEmpty(e.page_id)&&(e.page_id=t)},P.prototype.tryForceViewListPageId=function(e){this.isCbsEnabled&&this.checkNotExistOrEmpty(e.page_id)&&(this.checkNotExistOrEmpty(e.category)?this.checkNotExistOrEmpty(e.keywords)?e.page_id="viewList":e.page_id="viewSearchResult":e.page_id="viewCategory")},P.prototype.tryRunActionAfterAdBlockDetectionOrImmediate=function(t,e){var n=this,o=window.criteo_q;null!=o&&(o=o.adBlockDetector,this.isCbsEnabled)&&void 0!==o?(o(function(e){n.abe=e,t()}),e(t)):t()},P.prototype.tryAppendAdBlockerParameter=function(e){void 0!==this.abe&&e.push("abe="+(this.abe?1:0))},P.prototype.tryAppendUatParameter=function(e){var t;this.isCbsEnabled&&void 0!==this.uat&&(t=encodeURIComponent||escape,e.push("uat="+t(this.uat)))},P.prototype.clean=function(){this.abe=void 0,this.isCbsEnabled=!1,this.uat=void 0},P.prototype.enable=function(){this.isCbsEnabled=!0},P.prototype.setUat=function(e){this.uat=e},P.prototype.checkNotExistOrEmpty=function(e){return void 0===e||""===e};var te=P;function P(){this.abe=void 0,this.isCbsEnabled=!1,this.uat=void 0}var O=/^#(enable|disable)-criteo-tag-debug-mode(=(\d+))?$/;function ne(e,t,n,o,i){var r,a,c,s;return document&&window.location.hash&&(a=O.exec(window.location.hash))&&4===a.length&&(r="enable"===a[1],a=Number(a[3]),new l("criteoTagDebugMode",r?864e5:0).setValueWithNoDomain(r&&a&&!isNaN(a)?String(a):"0"),window.location.href=window.location.href.substr(0,window.location.href.indexOf("#"))),document&&"function"==typeof Array.prototype.indexOf&&-1!==document.cookie.indexOf("criteoTagDebugMode=")?(c=i,s={exceptions:e.exceptions,m_config:n,m_state:o,originalPush:e.push,performances:e.performances,push:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];0<e.length&&this.stagedPushes.push(e),c.stopRecordingInit()},pushError:function(e){this.stagedPushes.push(e)},removeLater:e.removeLater,setProtectedTimeout:t.setProtectedTimeout,stagedErrors:[],stagedPushes:[]},window.onerror=function(i){return function(e,t,n,o){return s.pushError({column:o,lineNumber:n,message:e,url:t}),!(!i||"function"!=typeof i)&&i.apply(window,[e,t,n,o])}}(window.onerror),r=s,document&&(a="ld-tag-debug."+u+".js",(i=document.createElement("script")).setAttribute("type","text/javascript"),i.setAttribute("src",document.location.protocol+"//static.criteo.net/js/ld/"+a),(a=document.getElementsByTagName("script")[0]).parentNode.insertBefore(i,a)),r):e}S.prototype.registerTrigger=function(e){var t;this.isFeatureAllowed("attribution-reporting")&&((t=document.createElement("img")).setAttribute("style","display:none;"),t.setAttribute("width","1"),t.setAttribute("height","1"),t.setAttribute("attributionsrc",S.ATTRIBUTION_TRIGGER_URL_PREFIX+"?"+e),e=document.getElementsByTagName("script")[0],t.setAttribute("data-owner","criteo-tag"),e.parentNode.insertBefore(t,e),W.removeLater(this.exceptionHandler,t))},S.prototype.isFeatureAllowed=function(t){return!(!document.featurePolicy||!document.featurePolicy.features())&&document.featurePolicy.features().some(function(e){return e===t})},S.ATTRIBUTION_TRIGGER_URL_PREFIX="https://measurement-api.criteo.com/conversiontracking";var oe=S;function S(e,t){this.document=e,this.exceptionHandler=t}N.generateUUID=function(){for(var e="",t=0;t<36;t++)e+=8===t||13===t||18===t||23===t?"-":14===t?"4":(19===t?Math.floor(4*Math.random())+8:Math.floor(16*Math.random())).toString(16);return e};var L,T,ie=N;function N(){}function re(){void 0!==(null==(e=null===window||void 0===window?void 0:window.location)?void 0:e.hash)&&-1!==window.location.hash.indexOf("onetag-debug")&&U.setLogLevel(d.Debug);var t,o,i,r,E=new z,m=new ee,y=(m.startRecordingInit(),{app:{accounts:[],actions:[],bodyReady:!1,disingScheduled:[],domReady:!1,eventSent:!1,queue:[]},cbs:new te}),w=G(),e=w.trackingCallData.isStepAllowed("identify"),n=(n=window.navigator.userAgent,a=null!==(n=n.match(Z)),{hasItp:null!==n&&11<=parseFloat(n[1]),isSafari:a}),C=e?new Q(E,n,window,w):new K,b=e?new $(n):new X,a=new H(window),F=new oe(document,E),M=(t=a.retrieveConsent.bind(a),o=!1,i=void 0,r=[],function(e){o?e(i):(r.push(e),1===r.length&&t(function(e){o=!0,i=e;for(var t=0,n=r;t<n.length;t++)(0,n[t])(i)}))});function S(e,t,n,o,i,r,a,c,s,u,l){e.waitingForSyncframe&&(e.waitingForSyncframe=!1,P(e,t,n,o,i,r,a,c,s,u,l))}function v(h,f,g,m,v,y,w,C,b,k,P,e){h.shouldInjectSyncframe()&&(e=h.createIframe(m,C.tagVersion,E,C.privateModeDetectionEnabled,e),window.addEventListener)&&(E.addProtectedEventListener(window,"message",function(e){var t,n,o,i,r,a,c,s,u,l,d,p;t=h,n=f,o=g,i=m,r=v,a=y,c=w,s=C,u=b,l=k,d=P,((p=(e=e).data)&&e.origin==t.gumSyncFrameOrigin||window.BypassSyncframeMessageSanityCheck)&&(e.stopPropagation(),i.checkCookies(p),t.waitingForSyncframe)&&S(t,n,o,i,r,a,c,s,u,l,d)},!0),O(f,k,b,{event:"appendtag",element:e}))}function c(e,t){var n=e.extraData,o=!1;if(200<n.length)o=!0;else for(var i=0,r=n;i<r.length;i++){var a=r[i],c=0;if(Object.keys)c=Object.keys(a).length;else for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&(c+=1);if(200<c){o=!0;break}}o&&(n.length=0),e.customerInfo=[],t.clean()}function k(){for(var n=[],e=0;e<arguments.length;e++)n[e]=arguments[e];E.catchAndStoreException(function(){m.startRecordingPush();for(var e=0,t=n;e<t.length;e++)y.app.queue.push(t[e]);P(b,y.app,y.cbs,C,w.shortNameMap,w.encodingConfig,w.parsingConfig,w.trackingCallData,w.hooks,w.workflow,w.identifierScrappingConfig),c(w.trackingCallData,y.cbs),m.stopRecordingPush()},n),m.stopRecordingInit()}function P(e,t,n,o,i,r,a,c,s,u,l){for(var d=[],p=t.queue,h=0;h<p.length;++h){var f=p[h];if(f instanceof Array&&p.splice.apply(p,[h+1,0].concat(f)),f instanceof Function)p.splice(h+1,0,f());else if(f&&"[object Object]"===f.toString())switch(function(e,t,n,o,i,r,a,c,s,u,l,d,p,h){var f=l.event,g=L(e,l);if(null!==g)return g;switch(l.event){case"setdata":return R(a.extraData,e.actions,l);case"setparameter":for(var m in l)"event"!==m.toLowerCase()&&l.hasOwnProperty(m)&&(a.handlerParams[m]=l[m]);return 1;case"calldising":x(a,e,l);break;case"setzipcode":case"setstore":return l.event="setdata",R(a.extraData,e.actions,l);case"setcustomerid":return l.event="setdata",l.customer_id=l.id,delete l.id,R(a.extraData,e.actions,l);case"setretailervisitorid":return t.enable(),l.event="setdata",l.retailer_visitor_id=l.id,delete l.id,R(a.extraData,e.actions,l);case"setgoogleadvertisingid":return n.gaid=l.gaid,R(a.extraData,e.actions,{event:"setdata",site_type:"aa"});case"setappleadvertisingid":return n.idfa=l.idfa,R(a.extraData,e.actions,{event:"setdata",site_type:"aios"});case"setemail":case"sethashedemail":case"ceh":l.event="setemail",l.hasOwnProperty("email")&&(l.email instanceof Array||(l.email=[l.email]),l.email=A(l.email));var v=B(l);return a.customerInfo.push(v),J(e.actions,B(l)),1;case"setidentity":if(l.hasOwnProperty("identity"))if(0<(v=A(v=l.identity instanceof Array?l.identity:[l.identity])).length)return l.identity=v,e.actions.push(B(l)),1;return 0;case"setsitetype":v="d";return"aios"!==l.type&&"aa"!=l.type||(v=l.type),"mobile"!==l.type&&"m"!==l.type||(v="m"),"tablet"!==l.type&&"t"!==l.type||(v="t"),l.event="setdata",delete l.type,l.site_type=v,R(a.extraData,e.actions,l);case"appendtag":return T(e,s,c,l);case"gettagstate":return l.callback instanceof Function?l.callback(y,w,C,b):1;case"setuat":return t.setUat(l.uat),1;case"viewsearchresult":case"viewcategory":t.trySetPageId(l,f),l.event="viewlist";break;case"viewlist":t.tryForceViewListPageId(l);break;case"viewitem":case"viewhome":case"viewbasket":case"tracktransaction":case"addtocart":t.trySetPageId(l,f);break;case"viewstore":t.trySetPageId(l,f),l.event="viewHome",l.sub_event_type="s";break;case"checkavailability":t.trySetPageId(l,f),l.event="viewBasket",l.sub_event_type="a";break;case"reserveinstore":t.trySetPageId(l,f),l.event="viewBasket",l.sub_event_type="r";break;case"flush":case"flushevents":return I(e,t,n,o,i,r,a,c,s,u,d!==p.length-1||0!==h.length),1;case"setaccount":return a.account=l.account,1;case"seturl":return a.handlerUrlPrefix=l.url,1;case"setcalltype":return a.handlerResponseType=l.type,1;case"setresponsetype":return a.responseType=l.type,1;case"setrequesttype":return a.requestType=l.type,1;case"setpartnerpayload":return a.partnerPayload=l.payload,1;case"oninitialized":return c.onInitialized=l.callback,1;case"ondomready":return c.onDOMReady=l.callback,1;case"beforeappend":return c.beforeAppend=l.callback,1;case"aftereval":return c.afterEval=l.callback,1;case"onflush":return c.onFlush=l.callback,1;case"onurlgenerated":return c.onUrlGenerated=l.callback,1;case"disonce":return s.disOnce=!0,1;case"manualdising":return s.manualDising=!0,1;case"manualflush":return s.manualFlush=!0,1;case"nopartialflush":return s.noPartialFlush=!0,1;case"disonpartialflush":return s.partialDis=!0,1}return e.actions.push(B(l)),1}(t,n,o,i,r,a,c,s,u,l,f,h,p,d)){case 0:d.push(f);break;case-1:d=d.concat(p.slice(h)),h=p.length}}s.afterEval instanceof Function&&s.afterEval(),t.queue=d||[],u.manualFlush||u.noPartialFlush&&0!==t.queue.length||e.waitingForSyncframe||I(t,n,o,i,r,a,c,s,u,l,0!==t.queue.length)}function x(e,t,n){n.hasOwnProperty("account")||(n.account=t.accounts);e=e.handlerResponseType;n.hasOwnProperty("type")&&(e=n.type,delete n.type),D(n.account,t.disingScheduled),"sequential"===e&&(n.dc=!0)}function O(e,t,n,o){var i=L(e,o);null===i&&T(e,t,n,o)}function T(e,t,n,o){if(!e.bodyReady||t.container&&document.body.contains(t.container)||(t.container=W.appendCriteoContainer(document.body)),o.url&&(e=void 0,o.isImgUrl?((e=document.createElement("img")).setAttribute("style","display:none;"),e.setAttribute("width","1"),e.setAttribute("height","1")):((e=document.createElement("script")).setAttribute("async","true"),e.setAttribute("type","text/javascript")),e.setAttribute("src",o.url),o.element=e),n.beforeAppend instanceof Function&&(o.element=n.beforeAppend(o.element)),B(o),o.element&&(o.element.tagName||o.isImgUrl)){if(t.container||"script"!==o.element.tagName.toLowerCase()&&!o.isImgUrl){if(!t.container)return 0;t.container.appendChild(o.element)}else{e=document.getElementsByTagName("script")[0];o.element.setAttribute("data-owner","criteo-tag"),e.parentNode.insertBefore(o.element,e)}W.removeLater(E,o.element)}return 1}function L(e,t){return!e.domReady&&t.requiresDOM&&"no"!==t.requiresDOM?"blocking"===t.requiresDOM?-1:0:(delete t.requiresDOM,t.event?(t.account&&D(t.account,e.accounts),t.event=t.event.toLowerCase(),null):(B(t),1))}function I(n,o,e,t,i,r,a,c,s,u,l){if(c.onFlush instanceof Function&&(c.onFlush(),U.warn("on flush hook is deprecated and will soon be removed. Please do not use it and contact criteo if you think this may break your integration")),0!==n.actions.length){for(var d=0,p=a.extraData;d<p.length;d++){var h=p[d];q(n.actions,h)}for(var f=0,g=a.customerInfo;f<g.length;f++){var m=g[f];J(n.actions,m)}for(var v,y,w,C=0,b=n.actions;C<b.length;C++){var k=b[C];(v=void 0)!==(k=k).identity&&JSON.stringify&&(v=k.identity instanceof Array?k.identity:[k.identity],k.raw_identity=JSON.stringify(v),delete k.identity)}if(!s.manualDising&&(!l||s.partialDis)){for(var P=[],S=0,T=n.accounts;S<T.length;S++){var I=T[S];V(n.disingScheduled,I)||P.push(I)}0<P.length&&(l=a,null===L(y=n,w={event:"callDising",account:P}))&&(x(l,y,w),y.actions.push(B(w)))}var _=!1,D=function(e,t,n,o,i,r,a,c){var s=e.actions,u=[];1===e.accounts.length&&(i.account=e.accounts[0]);null!==i.account&&u.push("a="+N(o,r,a,i.account,[]));"js"!==i.responseType&&u.push("rt="+N(o,r,a,i.responseType,[]));i.handlerParams&&(e=decodeURIComponent(N(o,r,a,i.handlerParams,[])))&&u.push(e);e=function(){for(var e=document.getElementsByTagName("script"),t=0;t<e.length;t++){var n=e[t],n=n.nonce||n.getAttribute("nonce");if(null!=n&&""!==n)return n}return}();void 0!==e&&(p=encodeURIComponent||escape,u.push("csp-nonce="+p(e)));t.tryAppendUatParameter(u);for(var l=0;l<s.length;++l){var d=s[l];d.account&&j(null===i.account?void 0:i.account,null===d.account?void 0:d.account)&&delete d.account,u.push("p"+l+"="+N(o,r,a,d,[]))}n.fillQueryStringParams(u,i),null!==i.partnerPayload&&u.push("pp="+N(o,r,a,i.partnerPayload,[]));i.dynamic&&u.push("dy=1");ae(W.getHighestAccessibleUrl(window),u,i.fullUrlMaxLength,"fu","ful"),i.isStepAllowed("readPreviousUrl")&&ae(W.getPreviousUrl(window),u,i.previousUrlMaxLength,"pu","pul");u.push("ceid="+ie.generateUUID()),u.push("dtycbr="+Math.floor(1e5*Math.random()));var p=n.scrapIdentifiers(c);0<p.length&&u.push("external_advids="+encodeURIComponent("["+p+"]"));return u}(n,o,e,t,a,i,r,u),A=(n.actions=[],function(){var e,t;_||(_=!0,o.tryAppendAdBlockerParameter(D),e=D.join("&"),t={event:"appendTag",isImgUrl:"gif"===a.responseType,url:a.handlerUrlPrefix+"?"+e},"function"==typeof c.onUrlGenerated?c.onUrlGenerated(t.url):"beacon"===a.requestType&&navigator.sendBeacon?navigator.sendBeacon(t.url):O(n,s,c,t),U.info("DIS call triggered",t.url,D),(n.eventSent=!0)===t.isImgUrl&&F.registerTrigger(e),s.disOnce)||(n.disingScheduled=[])}),R=function(){a.isStepAllowed("readCmaTestLabel")&&"cookieDeprecationLabel"in navigator?navigator.cookieDeprecationLabel.getValue().then(function(e){D.push("cl="+e),A()}).catch(function(e){A()}):A()};M(function(e){var t,n;D.push.apply(D,(t=[],(n=(e=e).gdprConsent)&&(void 0!==n.gdprApplies&&t.push("gra="+(n.gdprApplies?1:0)),void 0!==n.consentData&&t.push("grs="+n.consentData),void 0!==n.version)&&t.push("grv="+n.version),(n=e.ccpaConsent)&&(void 0!==n.uspString&&t.push("cs="+n.uspString),void 0!==n.version)&&t.push("cv="+n.version),t)),o.tryRunActionAfterAdBlockDetectionOrImmediate(R,function(e){return E.setProtectedTimeout(e,500)})})}}function N(e,t,n,o,i){var r,a,c,s,u,l=encodeURIComponent||escape,d="";if(o instanceof Function)d=N(e,t,n,o(),i);else if(o instanceof Array){for(var p=[],h=0;h<o.length;++h)p[h]=N(e,t,n,o[h],i);d+="["+p.join(",")+"]"}else if(o&&"[object Object]"===o.toString()){var f,g,m=[];for(f in o)o.hasOwnProperty(f)&&(g=i.concat([f]),m.push((c=e,s=f,u=(u=g).join("."),(c.properties[u]||s)+"="+N(e,t,n,o[f],g))));d+=m.join("&")}else if(1===i.length&&"event"===i[0])d+=e.events[o.toLowerCase()]?e.events[o.toLowerCase()]:o;else{v=n,a=o,r=(r=i).join(".");var v="string"==typeof a&&v.shouldParseField(r)&&0!=a.length&&"["==a.charAt(0)&&"]"==a.charAt(a.length-1)?a.substring(1,a.length-1).split(",",-1).map(function(e){return e.trim()}):[];if(0<v.length)return N(e,t,n,v,i);r=t,a=(a=i).join("."),r.shouldEncodeField(a)?d+=l(o):d+=o}return l(d)}return E.catchAndStoreException(function(){C.checkAcid(),C.checkClientSideIdentityStatus(),C.setCop(window),e=b,t=y.app,n=y.cbs,o=C,i=w.shortNameMap,r=w.encodingConfig,a=w.parsingConfig,c=w.trackingCallData,s=w.hooks,u=w.workflow,l=w.identifierScrappingConfig,e.setWaitingFlag(o),e.waitingForSyncframe&&E.setProtectedTimeout(function(){S(e,t,n,o,i,r,a,c,s,u,l)},1e4),W.onBodyReady(E,function(){w.hooks.onInitialized instanceof Function?(y.app.bodyReady=w.hooks.onInitialized(),U.warn("onInitialized hook is deprecated and will soon be removed. Please do not use it and contact criteo if you think this may break your integration")):y.app.bodyReady=!0,M(function(e){v(b,y.app,y.cbs,C,w.shortNameMap,w.encodingConfig,w.parsingConfig,w.trackingCallData,w.hooks,w.workflow,w.identifierScrappingConfig,e)}),P(b,y.app,y.cbs,C,w.shortNameMap,w.encodingConfig,w.parsingConfig,w.trackingCallData,w.hooks,w.workflow,w.identifierScrappingConfig)}),W.onDocumentReady(E,function(){w.hooks.onDOMReady instanceof Function?(y.app.domReady=w.hooks.onDOMReady(),U.warn("on DOM ready hook is deprecated and will soon be removed. Please do not use it and contact criteo if you think this may break your integration")):y.app.domReady=!0,P(b,y.app,y.cbs,C,w.shortNameMap,w.encodingConfig,w.parsingConfig,w.trackingCallData,w.hooks,w.workflow,w.identifierScrappingConfig)});var e,t,n,o,i,r,a,c,s,u,l,d,p,h=w.trackingCallData.extraData;try{var f=W.getAnchorWithReferrer(document);f&&f.hostname!==document.location.hostname&&Y(h,{event:"setData",ref:f.protocol+"//"+f.hostname})}catch(e){}function g(){p.eventSent||(d({event:"setRequestType",type:"beacon"}),d({event:"viewPage"}))}return _("visitEventEnabled",!1)&&(d=k,p=y.app,window.addEventListener&&window.addEventListener("pagehide",g),0<=(h=_("visitEventDelay",3e4)))&&setTimeout(g,h),ne({exceptions:E.exceptions,performances:m.timings,push:k,removeLater:function(e){return W.removeLater(E,e)}},E,w,y,m)})}function ae(e,t,n,o,i){var r;e&&0!==(e=e.trim()).length&&(n<(e=(r=encodeURIComponent||escape)(e)).length&&(t.push(i+"="+e.length),e=e.substr(0,n)),i=r(e),t.push(o+"="+i))}(!window.criteo_q||window.criteo_q instanceof Array)&&(T=window.criteo_q||[],window.criteo_q=re(),T.adBlockDetector,window.criteo_q.adBlockDetector=T.adBlockDetector,(L=window.criteo_q).push.apply(L,T))}();